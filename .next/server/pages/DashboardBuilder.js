"use strict";(()=>{var a={};a.id=89,a.ids=[89,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},20753:(a,b,c)=>{c.r(b),c.d(b,{config:()=>q,default:()=>m,getServerSideProps:()=>p,getStaticPaths:()=>o,getStaticProps:()=>n,handler:()=>y,reportWebVitals:()=>r,routeModule:()=>x,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>u,unstable_getStaticPaths:()=>t,unstable_getStaticProps:()=>s});var d=c(63885),e=c(80237),f=c(81413),g=c(65611),h=c.n(g),i=c(625),j=c.n(i),k=c(96596),l=c(12289);let m=(0,f.M)(k,"default"),n=(0,f.M)(k,"getStaticProps"),o=(0,f.M)(k,"getStaticPaths"),p=(0,f.M)(k,"getServerSideProps"),q=(0,f.M)(k,"config"),r=(0,f.M)(k,"reportWebVitals"),s=(0,f.M)(k,"unstable_getStaticProps"),t=(0,f.M)(k,"unstable_getStaticPaths"),u=(0,f.M)(k,"unstable_getStaticParams"),v=(0,f.M)(k,"unstable_getServerProps"),w=(0,f.M)(k,"unstable_getServerSideProps"),x=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/DashboardBuilder",pathname:"/DashboardBuilder",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:j(),Document:h()},userland:k}),y=(0,l.U)({srcPage:"/DashboardBuilder",config:q,userland:k,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p})},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},56472:a=>{a.exports=require("@opentelemetry/api")},82015:a=>{a.exports=require("react")},96596:(a,b,c)=>{c.r(b),c.d(b,{DashboardBuilder:()=>g});var d=c(8732),e=c(82015),f=c(74952);let g=()=>{let[a,b]=(0,e.useState)([]),[c,g]=(0,e.useState)(null),[h,i]=(0,e.useState)([]),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(null);(0,e.useEffect)(()=>{p()},[]),(0,e.useEffect)(()=>{c&&q(c.id)},[c]);let p=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/widgets/dashboards",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&(b(d.data),d.data.length>0&&g(d.data.find(a=>a.is_default)||d.data[0]))}catch(a){console.error("Failed to fetch dashboards:",a)}},q=async a=>{try{let b=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/widgets/dashboard/${a}/widgets`,{headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success&&i(d.data)}catch(a){console.error("Failed to fetch widgets:",a)}},r=async()=>{let a=prompt("Enter dashboard name:");if(a)try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/widgets/dashboards",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({name:a,layout:"[]"})});(await c.json()).success&&p()}catch(a){console.error("Failed to create dashboard:",a)}},s=async a=>{if(!c)return;let b=prompt(`Enter ${a} widget title:`);if(b)try{let d=localStorage.getItem("token"),e=await fetch("http://localhost:3001/api/widgets/add",{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({dashboard_id:c.id,widget_type:a,title:b,config:"{}",position_x:0,position_y:2*h.length,width:4,height:2})});(await e.json()).success&&(q(c.id),m(!1))}catch(a){console.error("Failed to add widget:",a)}},t=async(a,b,c)=>{try{let d=localStorage.getItem("token");await fetch(`http://localhost:3001/api/widgets/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({position_x:b,position_y:c})})}catch(a){console.error("Failed to update widget position:",a)}},u=async a=>{if(confirm("Delete this widget?"))try{let b=localStorage.getItem("token");await fetch(`http://localhost:3001/api/widgets/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),c&&q(c.id)}catch(a){console.error("Failed to delete widget:",a)}},v=a=>{a.preventDefault()};return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Builder"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Create and customize your perfect dashboard"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("button",{onClick:()=>k(!j),className:`px-4 py-2 rounded-lg font-medium transition-colors ${j?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 inline mr-2"}),"Save"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.ffu,{className:"w-4 h-4 inline mr-2"}),"Edit"]})}),(0,d.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,d.jsx)(f.FWt,{className:"w-4 h-4 inline mr-2"}),"New Dashboard"]})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Dashboard:"}),(0,d.jsx)("select",{value:c?.id||"",onChange:b=>{g(a.find(a=>a.id===parseInt(b.target.value))||null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:a.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.name," ",a.is_default?"(Default)":""]},a.id))})]})}),j&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Add Widget"}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{type:"stats",label:"Stats Card",icon:f.Ilq},{type:"chart",label:"Chart",icon:f.VH9},{type:"table",label:"Data Table",icon:f.XIK},{type:"pie",label:"Pie Chart",icon:f.rW1}].map(a=>(0,d.jsxs)("button",{onClick:()=>s(a.type),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,d.jsx)(a.icon,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),(0,d.jsx)("p",{className:"text-sm font-medium text-gray-700",children:a.label})]},a.type))})]}),(0,d.jsx)("div",{className:"grid grid-cols-12 gap-4",children:h.map(a=>(0,d.jsxs)("div",{draggable:j,onDragStart:()=>{o(a)},onDragOver:v,onDrop:b=>{var d,e;return d=a.position_x,e=a.position_y,void(b.preventDefault(),n&&(t(n.id,d,e),o(null),c&&q(c.id)))},className:`bg-white rounded-lg shadow p-6 ${j?"cursor-move border-2 border-dashed border-blue-300":""}`,style:{gridColumn:`span ${a.width}`,gridRow:`span ${a.height}`},children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(a=>{switch(a){case"chart":return(0,d.jsx)(f.VH9,{className:"w-5 h-5"});case"table":return(0,d.jsx)(f.XIK,{className:"w-5 h-5"});case"stats":return(0,d.jsx)(f.Ilq,{className:"w-5 h-5"});case"pie":return(0,d.jsx)(f.rW1,{className:"w-5 h-5"});default:return(0,d.jsx)(f.xA9,{className:"w-5 h-5"})}})(a.widget_type),(0,d.jsx)("h3",{className:"font-semibold text-gray-900",children:a.title})]}),j&&(0,d.jsx)("div",{className:"flex items-center space-x-2",children:(0,d.jsx)("button",{onClick:()=>u(a.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:(0,d.jsx)(f.TBR,{className:"w-4 h-4"})})})]}),(0,d.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,d.jsx)("p",{className:"text-sm",children:"Widget content will appear here"}),(0,d.jsxs)("p",{className:"text-xs mt-1",children:["Type: ",a.widget_type]})]})]},a.id))}),0===h.length&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,d.jsx)(f.xA9,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No widgets yet"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:'Click "Edit" and add your first widget to get started'})]})]})})}}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157,4952],()=>b(b.s=20753));module.exports=c})();