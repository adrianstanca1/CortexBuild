"use strict";(()=>{var a={};a.id=1739,a.ids=[1739,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},28932:(a,b,c)=>{c.r(b),c.d(b,{config:()=>v,default:()=>r,getServerSideProps:()=>u,getStaticPaths:()=>t,getStaticProps:()=>s,handler:()=>D,reportWebVitals:()=>w,routeModule:()=>C,unstable_getServerProps:()=>A,unstable_getServerSideProps:()=>B,unstable_getStaticParams:()=>z,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>x});var d={};c.r(d),c.d(d,{ProjectsPage:()=>p});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(82015),n=c(14666);let o=({isOpen:a,onClose:b,onSuccess:c})=>{let[d,e]=(0,m.useState)({name:"",description:"",client_id:"",location:"",budget:"",start_date:"",end_date:"",status:"planning",priority:"medium",type:"commercial"}),[f,g]=(0,m.useState)([]),[h,i]=(0,m.useState)(!1),[j,k]=(0,m.useState)(null);(0,m.useEffect)(()=>{a&&n()},[a]);let n=async()=>{try{let a=await fetch("/api/clients?limit=100"),b=await a.json();b.success&&g(b.data)}catch(a){console.error("Failed to fetch clients:",a)}};if(!a)return null;let o=async a=>{a.preventDefault(),i(!0),k(null);try{let a=localStorage.getItem("user"),f=a?JSON.parse(a):null,g=f?.company_id||"company-1",h=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,company_id:g,client_id:parseInt(d.client_id),budget:parseFloat(d.budget)||0})}),i=await h.json();i.success?(c(),b(),e({name:"",description:"",client_id:"",location:"",budget:"",start_date:"",end_date:"",status:"planning",priority:"medium",type:"commercial"})):k(i.error||"Failed to create project")}catch(a){k(a.message||"Failed to create project")}finally{i(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"New Project"}),(0,l.jsx)("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsxs)("form",{onSubmit:o,className:"p-6 space-y-6",children:[j&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:j}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name *"}),(0,l.jsx)("input",{type:"text",required:!0,value:d.name,onChange:a=>e({...d,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project name"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,l.jsx)("textarea",{value:d.description,onChange:a=>e({...d,description:a.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project description"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client *"}),(0,l.jsxs)("select",{required:!0,value:d.client_id,onChange:a=>e({...d,client_id:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"",children:"Select client"}),f.map(a=>(0,l.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),(0,l.jsx)("input",{type:"text",value:d.location,onChange:a=>e({...d,location:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Project location"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget"}),(0,l.jsx)("input",{type:"number",value:d.budget,onChange:a=>e({...d,budget:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,l.jsxs)("select",{value:d.type,onChange:a=>e({...d,type:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"residential",children:"Residential"}),(0,l.jsx)("option",{value:"commercial",children:"Commercial"}),(0,l.jsx)("option",{value:"industrial",children:"Industrial"}),(0,l.jsx)("option",{value:"infrastructure",children:"Infrastructure"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,l.jsx)("input",{type:"date",value:d.start_date,onChange:a=>e({...d,start_date:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,l.jsx)("input",{type:"date",value:d.end_date,onChange:a=>e({...d,end_date:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,l.jsxs)("select",{value:d.status,onChange:a=>e({...d,status:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"planning",children:"Planning"}),(0,l.jsx)("option",{value:"in progress",children:"In Progress"}),(0,l.jsx)("option",{value:"on hold",children:"On Hold"}),(0,l.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,l.jsxs)("select",{value:d.priority,onChange:a=>e({...d,priority:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"low",children:"Low"}),(0,l.jsx)("option",{value:"medium",children:"Medium"}),(0,l.jsx)("option",{value:"high",children:"High"}),(0,l.jsx)("option",{value:"critical",children:"Critical"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:[(0,l.jsx)("button",{type:"button",onClick:b,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center space-x-2",children:h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"inline-block animate-spin",children:"⏳"}),(0,l.jsx)("span",{children:"Creating..."})]}):(0,l.jsx)("span",{children:"Create Project"})})]})]})]})})},p=()=>{let[a,b]=(0,m.useState)(""),[c,d]=(0,m.useState)("all"),[e,f]=(0,m.useState)("all"),[g,h]=(0,m.useState)(null),[i,j]=(0,m.useState)([]),[k,p]=(0,m.useState)(!0),[q,r]=(0,m.useState)(null),[s,t]=(0,m.useState)(1),[u,v]=(0,m.useState)(1),[w,x]=(0,m.useState)(!1);(0,m.useEffect)(()=>{g||y()},[a,c,s,g]);let y=async()=>{try{p(!0),r(null);let b=new URLSearchParams({page:s.toString(),limit:"20"});a&&b.append("search",a),"all"!==c&&b.append("status",c);let d=await fetch(`/api/projects?${b}`),e=await d.json();e.success?(j(e.data),v(e.pagination?.totalPages||1)):r(e.error||"Failed to fetch projects")}catch(a){r(a.message||"Failed to fetch projects"),j(z)}finally{p(!1)}};if(g)return(0,l.jsx)(n.ProjectDetailPage,{projectId:g,onBack:()=>h(null)});let z=[{id:"1",name:"ASasdad",client:"Green Valley Homes",location:"rm82ul",budget:123333,spent:0,progress:0,status:"planning",priority:"medium",startDate:null,endDate:null},{id:"2",name:"Downtown Office Complex",client:"Metro Construction Group",location:"Manhattan, NY",budget:125e5,spent:52e5,progress:45,status:"in progress",priority:"high",startDate:"Jan 15, 2024",endDate:"Jun 30, 2025"},{id:"3",name:"Riverside Luxury Apartments",client:"Green Valley Homes",location:"Los Angeles, CA",budget:89e5,spent:21e5,progress:28,status:"in progress",priority:"medium",startDate:"Mar 1, 2024",endDate:"Aug 31, 2025"},{id:"4",name:"Manufacturing Facility Expansion",client:"Industrial Partners LLC",location:"Chicago, IL",budget:15e6,spent:0,progress:0,status:"planning",priority:"critical",startDate:"Jun 1, 2024",endDate:"Dec 31, 2025"},{id:"5",name:"Riverside Apartments",client:"Green Valley Homes",location:"456 River Rd",budget:32e5,spent:18e5,progress:56,status:"in progress",priority:"medium",startDate:"Mar 1, 2024",endDate:"Dec 15, 2024"},{id:"6",name:"City Bridge Renovation",client:"Metro City Council",location:"Old Town Bridge",budget:18e5,spent:0,progress:0,status:"approved",priority:"critical",startDate:"Jul 1, 2024",endDate:"Mar 31, 2025"},{id:"7",name:"Downtown Office Complex",client:"Sunset Developments",location:"123 Main St, Downtown",budget:55e5,spent:21e5,progress:38,status:"in progress",priority:"high",startDate:"Jan 15, 2024",endDate:"Jun 30, 2025"}],A=a=>null==a?"\xa30":`\xa3${a.toLocaleString()}`;return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Projects"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage all your construction projects"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsx)("input",{type:"text",placeholder:"Search projects...",value:a,onChange:a=>b(a.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),(0,l.jsxs)("select",{value:c,onChange:a=>d(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"planning",children:"Planning"}),(0,l.jsx)("option",{value:"in progress",children:"In Progress"}),(0,l.jsx)("option",{value:"approved",children:"Approved"}),(0,l.jsx)("option",{value:"completed",children:"Completed"})]}),(0,l.jsxs)("select",{value:e,onChange:a=>f(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Types"}),(0,l.jsx)("option",{value:"residential",children:"Residential"}),(0,l.jsx)("option",{value:"commercial",children:"Commercial"}),(0,l.jsx)("option",{value:"industrial",children:"Industrial"})]}),(0,l.jsxs)("button",{type:"button",onClick:()=>x(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,l.jsx)("span",{children:"New Project"})]})]})]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(a=>(0,l.jsxs)("div",{onClick:()=>h(a.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-all cursor-pointer hover:scale-105",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${{planning:"bg-yellow-100 text-yellow-800","in progress":"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800"}[a.status]||"bg-gray-100 text-gray-800"}`,children:a.status}),(0,l.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${{low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"}[a.priority]||"bg-gray-100 text-gray-800"}`,children:a.priority})]})}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:a.client})]}),(0,l.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:a.location}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Budget:"}),(0,l.jsx)("span",{className:"font-semibold text-gray-900",children:A(a.budget)})]}),a.spent>0&&(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Spent:"}),(0,l.jsx)("span",{className:"font-semibold text-gray-900",children:A(a.spent)})]}),a.progress>0&&(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Progress:"}),(0,l.jsxs)("span",{className:"font-semibold text-gray-900",children:[a.progress,"%"]})]}),a.startDate&&a.endDate&&(0,l.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,l.jsx)("span",{children:a.startDate}),(0,l.jsx)("span",{className:"mx-1",children:"→"}),(0,l.jsx)("span",{children:a.endDate})]})]}),(0,l.jsxs)("button",{type:"button",className:"w-full bg-gray-50 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center space-x-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,l.jsx)("span",{children:"View Details"})]})]},a.id))}),(0,l.jsx)(o,{isOpen:w,onClose:()=>x(!1),onSuccess:()=>{y(),x(!1)}})]})};var q=c(12289);let r=(0,g.M)(d,"default"),s=(0,g.M)(d,"getStaticProps"),t=(0,g.M)(d,"getStaticPaths"),u=(0,g.M)(d,"getServerSideProps"),v=(0,g.M)(d,"config"),w=(0,g.M)(d,"reportWebVitals"),x=(0,g.M)(d,"unstable_getStaticProps"),y=(0,g.M)(d,"unstable_getStaticPaths"),z=(0,g.M)(d,"unstable_getStaticParams"),A=(0,g.M)(d,"unstable_getServerProps"),B=(0,g.M)(d,"unstable_getServerSideProps"),C=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/ProjectsPage",pathname:"/ProjectsPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),D=(0,q.U)({srcPage:"/ProjectsPage",config:v,userland:d,routeModule:C,getStaticPaths:t,getStaticProps:s,getServerSideProps:u})},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},56472:a=>{a.exports=require("@opentelemetry/api")},82015:a=>{a.exports=require("react")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157,4666],()=>b(b.s=28932));module.exports=c})();