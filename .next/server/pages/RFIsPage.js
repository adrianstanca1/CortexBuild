"use strict";(()=>{var a={};a.id=233,a.ids=[233,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},56472:a=>{a.exports=require("@opentelemetry/api")},73203:(a,b,c)=>{c.r(b),c.d(b,{config:()=>u,default:()=>q,getServerSideProps:()=>t,getStaticPaths:()=>s,getStaticProps:()=>r,handler:()=>C,reportWebVitals:()=>v,routeModule:()=>B,unstable_getServerProps:()=>z,unstable_getServerSideProps:()=>A,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>w});var d={};c.r(d),c.d(d,{RFIsPage:()=>o});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(82015);let n=({isOpen:a,onClose:b,onSuccess:c})=>{let[d,e]=(0,m.useState)({project_id:"",subject:"",description:"",priority:"medium",due_date:""}),[f,g]=(0,m.useState)([]),[h,i]=(0,m.useState)(!1),[j,k]=(0,m.useState)(null);(0,m.useEffect)(()=>{a&&n()},[a]);let n=async()=>{try{let a=await fetch("/api/projects?limit=100"),b=await a.json();b.success&&g(b.data)}catch(a){console.error("Failed to fetch projects:",a)}};if(!a)return null;let o=async a=>{a.preventDefault(),i(!0),k(null);try{let a=localStorage.getItem("user"),f=a?JSON.parse(a):null,g=f?.company_id||"company-1",h=await fetch("/api/rfis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,company_id:g,project_id:parseInt(d.project_id),rfi_number:`RFI-${Date.now()}`,status:"open"})}),i=await h.json();i.success?(c(),b(),e({project_id:"",subject:"",description:"",priority:"medium",due_date:""})):k(i.error||"Failed to create RFI")}catch(a){k(a.message||"Failed to create RFI")}finally{i(!1)}};return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New RFI"}),(0,l.jsx)("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsxs)("form",{onSubmit:o,className:"p-6 space-y-4",children:[j&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:j}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Project ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("select",{required:!0,value:d.project_id,onChange:a=>e({...d,project_id:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Select a project"}),f.map(a=>(0,l.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",required:!0,value:d.subject,onChange:a=>e({...d,subject:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter RFI subject"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("textarea",{required:!0,value:d.description,onChange:a=>e({...d,description:a.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Describe the information request..."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,l.jsxs)("select",{value:d.priority,onChange:a=>e({...d,priority:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"low",children:"Low"}),(0,l.jsx)("option",{value:"medium",children:"Medium"}),(0,l.jsx)("option",{value:"high",children:"High"}),(0,l.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),(0,l.jsx)("input",{type:"date",value:d.due_date,onChange:a=>e({...d,due_date:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,l.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Creating...":"Create RFI"})]})]})]})})},o=()=>{let[a,b]=(0,m.useState)(""),[c,d]=(0,m.useState)("all"),[e,f]=(0,m.useState)([]),[g,h]=(0,m.useState)(!0),[i,j]=(0,m.useState)(null),[k,o]=(0,m.useState)(!1);(0,m.useEffect)(()=>{p()},[a,c]);let p=async()=>{try{h(!0);let b=new URLSearchParams({page:"1",limit:"50"});a&&b.append("search",a),"all"!==c&&b.append("status",c);let d=await fetch(`/api/rfis?${b}`),e=await d.json();e.success?f(e.data):j(e.error)}catch(a){j(a.message),f(q)}finally{h(!1)}},q=[{id:"RFI-2024-001",title:"Clarification on HVAC Duct Sizing",description:"The mechanical drawings show 14-inch ducts for the main supply, but the specifications call for 16-inch. Which should we follow?",project:"Downtown Office Complex",status:"answered",priority:"high",category:"design",submittedTo:"Engineering Team",dueDate:"Dec 20, 2024",response:"Use 16-inch ducts as specified in the specifications document. The drawings will be updated in the next revision.",respondedBy:"Lead Engineer",responseDate:"Dec 18, 2024",overdue:!1},{id:"RFI-2024-002",title:"Flooring Material Confirmation",description:"Owner requested premium hardwood, but budget shows standard laminate. Need clarification before ordering.",project:"Riverside Luxury Apartments",status:"open",priority:"urgent",category:"materials",submittedTo:"Owner",dueDate:"Dec 25, 2024",response:null,respondedBy:null,responseDate:null,overdue:!0,overdueDays:287},{id:"RFI-2024-003",title:"Fire Rating Requirements",description:"Do interior partition walls on 3rd floor require 1-hour or 2-hour fire rating per local code?",project:"Downtown Office Complex",status:"pending response",priority:"high",category:"code compliance",submittedTo:"Code Inspector",dueDate:"Dec 22, 2024",response:null,respondedBy:null,responseDate:null,overdue:!0,overdueDays:290}],r={total:3,open:2,overdue:2,answered:1};return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"RFIs"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Manage Requests for Information"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>o(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,l.jsx)("span",{children:"New RFI"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsx)("input",{type:"text",placeholder:"Search RFIs...",value:a,onChange:a=>b(a.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"})]}),(0,l.jsxs)("select",{value:c,onChange:a=>d(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Status"}),(0,l.jsx)("option",{value:"open",children:"Open"}),(0,l.jsx)("option",{value:"pending response",children:"Pending Response"}),(0,l.jsx)("option",{value:"answered",children:"Answered"}),(0,l.jsx)("option",{value:"closed",children:"Closed"})]})]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total RFIs"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r.total})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-2xl",children:"\uD83D\uDCCB"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Open"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r.open})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-2xl",children:"○"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Overdue"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r.overdue})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-red-50 rounded-lg flex items-center justify-center text-2xl",children:"⚠️"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Answered"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r.answered})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center text-2xl",children:"✓"})]})})]}),(0,l.jsx)("div",{className:"space-y-4",children:e.map(a=>(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsxs)("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${{answered:"bg-green-100 text-green-800",open:"bg-blue-100 text-blue-800","pending response":"bg-yellow-100 text-yellow-800",closed:"bg-gray-100 text-gray-800"}[a.status]||"bg-gray-100 text-gray-800"}`,children:[(0,l.jsx)("span",{children:{answered:"✓",open:"○","pending response":"⏳",closed:"✕"}[a.status]||"○"}),(0,l.jsx)("span",{children:a.status})]}),(0,l.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${{low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[a.priority]||"bg-gray-100 text-gray-800"}`,children:a.priority}),a.overdue&&(0,l.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 flex items-center space-x-1",children:[(0,l.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsxs)("span",{children:[a.overdueDays,"d overdue"]})]})]}),(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:["RFI #",a.id]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:a.project})]})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:a.title}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Category: "}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:a.category})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Submitted to: "}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:a.submittedTo})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Due: "}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:a.dueDate})]})]}),a.response&&(0,l.jsxs)("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Response:"}),(0,l.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:a.response}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:["By ",a.respondedBy," on ",a.responseDate]})]})]}),!a.response&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsxs)("button",{type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})}),(0,l.jsx)("span",{children:"Respond"})]})})]},a.id))}),(0,l.jsx)(n,{isOpen:k,onClose:()=>o(!1),onSuccess:()=>{o(!1),p()}})]})};var p=c(12289);let q=(0,g.M)(d,"default"),r=(0,g.M)(d,"getStaticProps"),s=(0,g.M)(d,"getStaticPaths"),t=(0,g.M)(d,"getServerSideProps"),u=(0,g.M)(d,"config"),v=(0,g.M)(d,"reportWebVitals"),w=(0,g.M)(d,"unstable_getStaticProps"),x=(0,g.M)(d,"unstable_getStaticPaths"),y=(0,g.M)(d,"unstable_getStaticParams"),z=(0,g.M)(d,"unstable_getServerProps"),A=(0,g.M)(d,"unstable_getServerSideProps"),B=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/RFIsPage",pathname:"/RFIsPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),C=(0,p.U)({srcPage:"/RFIsPage",config:u,userland:d,routeModule:B,getStaticPaths:s,getStaticProps:r,getServerSideProps:t})},82015:a=>{a.exports=require("react")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157],()=>b(b.s=73203));module.exports=c})();