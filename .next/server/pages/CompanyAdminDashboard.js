"use strict";(()=>{var a={};a.id=5314,a.ids=[3220,5314],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},56472:a=>{a.exports=require("@opentelemetry/api")},73427:(a,b,c)=>{c.r(b),c.d(b,{config:()=>w,default:()=>s,getServerSideProps:()=>v,getStaticPaths:()=>u,getStaticProps:()=>t,handler:()=>E,reportWebVitals:()=>x,routeModule:()=>D,unstable_getServerProps:()=>B,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>A,unstable_getStaticPaths:()=>z,unstable_getStaticProps:()=>y});var d={};c.r(d),c.d(d,{CompanyAdminDashboard:()=>o});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(82015),n=c(74952);let o=()=>{let[a,b]=(0,m.useState)({totalProjects:0,activeProjects:0,totalClients:0,totalInvoices:0,totalRevenue:0,teamMembers:0}),[c,d]=(0,m.useState)(null),[e,f]=(0,m.useState)(!0);(0,m.useEffect)(()=>{g(),h()},[]);let g=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/auth/me",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.user&&d(c.user)}catch(a){console.error("Failed to fetch user data:",a)}},h=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/projects",{headers:{Authorization:`Bearer ${a}`}}),d=(await c.json()).data||[],e=await fetch("http://localhost:3001/api/clients",{headers:{Authorization:`Bearer ${a}`}}),f=(await e.json()).data||[],g=await fetch("http://localhost:3001/api/invoices",{headers:{Authorization:`Bearer ${a}`}}),h=(await g.json()).data||[],i=d.filter(a=>"active"===a.status).length,j=h.reduce((a,b)=>a+(b.total_amount||0),0);b({totalProjects:d.length,activeProjects:i,totalClients:f.length,totalInvoices:h.length,totalRevenue:j,teamMembers:1})}catch(a){console.error("Failed to fetch company stats:",a)}finally{f(!1)}};return e?(0,l.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,l.jsx)("div",{className:"text-xl",children:"Loading Dashboard..."})}):(0,l.jsxs)("div",{className:"p-8 bg-gray-50 min-h-screen",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Company Dashboard"}),(0,l.jsxs)("p",{className:"text-gray-600 mt-2",children:["Welcome back, ",c?.name||"Admin","! Here's your company overview."]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,l.jsx)(p,{title:"Total Projects",value:a.totalProjects,subtitle:`${a.activeProjects} active`,icon:n.BmN,color:"blue",trend:"+12%"}),(0,l.jsx)(p,{title:"Total Clients",value:a.totalClients,icon:n.zWC,color:"green"}),(0,l.jsx)(p,{title:"Total Revenue",value:`\xa3${a.totalRevenue.toLocaleString("en-GB")}`,icon:n.G9t,color:"purple",trend:"+8%"}),(0,l.jsx)(p,{title:"Invoices",value:a.totalInvoices,icon:n.iUU,color:"orange"}),(0,l.jsx)(p,{title:"Team Members",value:a.teamMembers,icon:n.zWC,color:"indigo"}),(0,l.jsx)(p,{title:"Active Projects",value:a.activeProjects,icon:n.ntg,color:"pink"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsx)(q,{label:"New Project",icon:n.BmN,onClick:()=>window.location.href="#/projects/new"}),(0,l.jsx)(q,{label:"New Client",icon:n.zWC,onClick:()=>window.location.href="#/clients/new"}),(0,l.jsx)(q,{label:"New Invoice",icon:n.iUU,onClick:()=>window.location.href="#/invoices/new"}),(0,l.jsx)(q,{label:"View Reports",icon:n.ntg,onClick:()=>window.location.href="#/reports"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Projects"}),(0,l.jsx)("div",{className:"space-y-3",children:(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent projects to display"})})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Upcoming Deadlines"}),(0,l.jsx)("div",{className:"space-y-3",children:(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"No upcoming deadlines"})})]})]})]})},p=({title:a,value:b,icon:c,color:d,subtitle:e,trend:f})=>(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:a}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:b}),e&&(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e}),f&&(0,l.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[f," from last month"]})]}),(0,l.jsx)("div",{className:`p-3 rounded-lg ${{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",indigo:"bg-indigo-100 text-indigo-600",pink:"bg-pink-100 text-pink-600"}[d]}`,children:(0,l.jsx)(c,{className:"w-6 h-6"})})]})}),q=({label:a,icon:b,onClick:c})=>(0,l.jsxs)("button",{onClick:c,className:"flex flex-col items-center justify-center p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all",children:[(0,l.jsx)(b,{className:"w-8 h-8 text-gray-600 mb-2"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a})]});var r=c(12289);let s=(0,g.M)(d,"default"),t=(0,g.M)(d,"getStaticProps"),u=(0,g.M)(d,"getStaticPaths"),v=(0,g.M)(d,"getServerSideProps"),w=(0,g.M)(d,"config"),x=(0,g.M)(d,"reportWebVitals"),y=(0,g.M)(d,"unstable_getStaticProps"),z=(0,g.M)(d,"unstable_getStaticPaths"),A=(0,g.M)(d,"unstable_getStaticParams"),B=(0,g.M)(d,"unstable_getServerProps"),C=(0,g.M)(d,"unstable_getServerSideProps"),D=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/CompanyAdminDashboard",pathname:"/CompanyAdminDashboard",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),E=(0,r.U)({srcPage:"/CompanyAdminDashboard",config:w,userland:d,routeModule:D,getStaticPaths:u,getStaticProps:t,getServerSideProps:v})},82015:a=>{a.exports=require("react")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157,4952],()=>b(b.s=73427));module.exports=c})();