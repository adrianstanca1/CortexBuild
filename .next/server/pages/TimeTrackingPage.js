"use strict";(()=>{var a={};a.id=393,a.ids=[393,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},56472:a=>{a.exports=require("@opentelemetry/api")},82015:a=>{a.exports=require("react")},93481:(a,b,c)=>{c.r(b),c.d(b,{config:()=>u,default:()=>q,getServerSideProps:()=>t,getStaticPaths:()=>s,getStaticProps:()=>r,handler:()=>C,reportWebVitals:()=>v,routeModule:()=>B,unstable_getServerProps:()=>z,unstable_getServerSideProps:()=>A,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>x,unstable_getStaticProps:()=>w});var d={};c.r(d),c.d(d,{TimeTrackingPage:()=>o});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(82015);let n=({isOpen:a,onClose:b,onSuccess:c})=>{let[d,e]=(0,m.useState)({project_id:"",date:new Date().toISOString().split("T")[0],hours:"",description:"",billable:!0,hourly_rate:""}),[f,g]=(0,m.useState)([]),[h,i]=(0,m.useState)(!1),[j,k]=(0,m.useState)(null);(0,m.useEffect)(()=>{a&&n()},[a]);let n=async()=>{try{let a=await fetch("/api/projects?limit=100"),b=await a.json();b.success&&g(b.data)}catch(a){console.error("Failed to fetch projects:",a)}};if(!a)return null;let o=async a=>{a.preventDefault(),i(!0),k(null);try{let a=localStorage.getItem("user"),f=a?JSON.parse(a):null,g=f?.company_id||"company-1",h=f?.id||"user-1",i=await fetch("/api/time-entries",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...d,company_id:g,user_id:h,project_id:parseInt(d.project_id),hours:parseFloat(d.hours),hourly_rate:d.hourly_rate?parseFloat(d.hourly_rate):null})}),j=await i.json();j.success?(c(),b(),e({project_id:"",date:new Date().toISOString().split("T")[0],hours:"",description:"",billable:!0,hourly_rate:""})):k(j.error||"Failed to create time entry")}catch(a){k(a.message||"Failed to create time entry")}finally{i(!1)}},p=d.hours&&d.hourly_rate?(parseFloat(d.hours)*parseFloat(d.hourly_rate)).toFixed(2):"0.00";return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Log Time Entry"}),(0,l.jsx)("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,l.jsxs)("form",{onSubmit:o,className:"p-6 space-y-4",children:[j&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:j}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Project ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("select",{required:!0,value:d.project_id,onChange:a=>e({...d,project_id:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"Select project"}),f.map(a=>(0,l.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"date",required:!0,value:d.date,onChange:a=>e({...d,date:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Hours ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"number",required:!0,step:"0.25",min:"0.25",max:"24",value:d.hours,onChange:a=>e({...d,hours:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"8.0"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("textarea",{required:!0,value:d.description,onChange:a=>e({...d,description:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"What did you work on?"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:d.billable,onChange:a=>e({...d,billable:a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Billable"})]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Rate ($)"}),(0,l.jsx)("input",{type:"number",step:"0.01",min:"0",value:d.hourly_rate,onChange:a=>e({...d,hourly_rate:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"75.00"})]})]}),d.hours&&d.hourly_rate&&(0,l.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Total Amount:"}),(0,l.jsxs)("span",{className:"text-lg font-bold text-blue-900",children:["$",p]})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,l.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Logging...":"Log Time"})]})]})]})})},o=()=>{let[a,b]=(0,m.useState)(""),[c,d]=(0,m.useState)("this-week"),[e,f]=(0,m.useState)("all"),[g,h]=(0,m.useState)([]),[i,j]=(0,m.useState)(!0),[k,o]=(0,m.useState)(null),[p,q]=(0,m.useState)({totalHours:0,revenue:0,entries:0}),[r,s]=(0,m.useState)(!1);(0,m.useEffect)(()=>{t()},[a,c,e]);let t=async()=>{try{j(!0);let a=new URLSearchParams({page:"1",limit:"100"});"all"!==e&&a.append("project_id",e);let b=await fetch(`/api/time-entries?${a}`),c=await b.json();if(c.success){h(c.data);let a=c.data.reduce((a,b)=>a+(b.hours||0),0),b=c.data.reduce((a,b)=>a+(b.amount||0),0);q({totalHours:a,revenue:b,entries:c.data.length})}else o(c.error)}catch(a){o(a.message),h(u)}finally{j(!1)}},u=[{id:"1",project:"Manufacturing Facility Expansion",description:"",date:"Oct 7, 2025",hours:16,rate:0,amount:0,billable:!0,category:"labor",employee:"Adrian Stanca"}];return(0,l.jsxs)("div",{className:"p-8",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Time Tracking"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Log and manage your work hours"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("button",{type:"button",onClick:()=>s(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,l.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,l.jsx)("span",{children:"Log Time"})]}),(0,l.jsxs)("select",{value:c,onChange:a=>d(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"today",children:"Today"}),(0,l.jsx)("option",{value:"this-week",children:"This Week"}),(0,l.jsx)("option",{value:"this-month",children:"This Month"}),(0,l.jsx)("option",{value:"last-month",children:"Last Month"}),(0,l.jsx)("option",{value:"custom",children:"Custom Range"})]})]})]})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Hours"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[p.totalHours,"h"]})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center text-2xl",children:"⏱️"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Revenue"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["\xa3",p.revenue.toFixed(2)]})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-green-50 rounded-lg flex items-center justify-center text-2xl",children:"\uD83D\uDCB0"})]})}),(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Entries"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:p.entries})]}),(0,l.jsx)("div",{className:"w-12 h-12 bg-purple-50 rounded-lg flex items-center justify-center text-2xl",children:"\uD83D\uDCDD"})]})})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsx)("input",{type:"text",placeholder:"Search time entries...",value:a,onChange:a=>b(a.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-full"})]}),(0,l.jsxs)("select",{value:e,onChange:a=>f(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,l.jsx)("option",{value:"all",children:"All Projects"}),(0,l.jsx)("option",{value:"downtown",children:"Downtown Office Complex"}),(0,l.jsx)("option",{value:"riverside",children:"Riverside Luxury Apartments"}),(0,l.jsx)("option",{value:"manufacturing",children:"Manufacturing Facility Expansion"})]})]}),(0,l.jsx)("div",{className:"space-y-4",children:g.map(a=>(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900",children:a.project}),a.billable&&(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800",children:"Billable"})]}),a.description&&(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),(0,l.jsxs)("div",{className:"flex items-center text-sm text-gray-600 space-x-2",children:[(0,l.jsx)("span",{children:a.date}),(0,l.jsx)("span",{children:"•"}),(0,l.jsxs)("span",{className:"font-semibold",children:[a.hours,"h"]})]})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["\xa3",a.amount.toFixed(2)]}),(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800",children:a.category})]})]})},a.id))}),(0,l.jsx)(n,{isOpen:r,onClose:()=>s(!1),onSuccess:()=>{s(!1),t()}})]})};var p=c(12289);let q=(0,g.M)(d,"default"),r=(0,g.M)(d,"getStaticProps"),s=(0,g.M)(d,"getStaticPaths"),t=(0,g.M)(d,"getServerSideProps"),u=(0,g.M)(d,"config"),v=(0,g.M)(d,"reportWebVitals"),w=(0,g.M)(d,"unstable_getStaticProps"),x=(0,g.M)(d,"unstable_getStaticPaths"),y=(0,g.M)(d,"unstable_getStaticParams"),z=(0,g.M)(d,"unstable_getServerProps"),A=(0,g.M)(d,"unstable_getServerSideProps"),B=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/TimeTrackingPage",pathname:"/TimeTrackingPage",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),C=(0,p.U)({srcPage:"/TimeTrackingPage",config:u,userland:d,routeModule:B,getStaticPaths:s,getStaticProps:r,getServerSideProps:t})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157],()=>b(b.s=93481));module.exports=c})();