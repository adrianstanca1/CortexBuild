"use strict";(()=>{var a={};a.id=382,a.ids=[382,3220],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},33873:a=>{a.exports=require("path")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},56472:a=>{a.exports=require("@opentelemetry/api")},68005:(a,b,c)=>{c.r(b),c.d(b,{config:()=>N,default:()=>J,getServerSideProps:()=>M,getStaticPaths:()=>L,getStaticProps:()=>K,handler:()=>V,reportWebVitals:()=>O,routeModule:()=>U,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>T,unstable_getStaticParams:()=>R,unstable_getStaticPaths:()=>Q,unstable_getStaticProps:()=>P});var d={};c.r(d),c.d(d,{SuperAdminDashboard:()=>G});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(625),k=c.n(j),l=c(8732),m=c(82015),n=c(74952);let o=({title:a,user:b,companies:c,onSubmit:d,onClose:e})=>{let[f,g]=(0,m.useState)({email:b?.email||"",password:"",name:b?.name||"",role:b?.role||"user",company_id:b?.company_id||"",is_active:b?.is_active!==void 0?b.is_active:1}),[h,i]=(0,m.useState)({});return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:a}),(0,l.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(n.X,{className:"w-6 h-6"})})]}),(0,l.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),(()=>{let a={};return f.email?/\S+@\S+\.\S+/.test(f.email)||(a.email="Email is invalid"):a.email="Email is required",b||f.password?!b&&f.password.length<6&&(a.password="Password must be at least 6 characters"):a.password="Password is required",f.name||(a.name="Name is required"),f.company_id||(a.company_id="Company is required"),i(a),0===Object.keys(a).length})()){let a={...f};b&&!a.password&&delete a.password,d(a)}},className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"email",value:f.email,onChange:a=>g({...f,email:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${h.email?"border-red-500":"border-gray-300"}`,placeholder:"user@example.com"}),h.email&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!b&&(0,l.jsx)("span",{className:"text-red-500",children:"*"}),b&&(0,l.jsx)("span",{className:"text-gray-500 text-xs",children:"(leave empty to keep current)"})]}),(0,l.jsx)("input",{type:"password",value:f.password,onChange:a=>g({...f,password:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${h.password?"border-red-500":"border-gray-300"}`,placeholder:b?"Leave empty to keep current":"Enter password"}),h.password&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.password})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:f.name,onChange:a=>g({...f,name:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${h.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),h.name&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Role ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("select",{value:f.role,onChange:a=>g({...f,role:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"manager",children:"Manager"}),(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"super_admin",children:"Super Admin"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsxs)("select",{value:f.company_id,onChange:a=>g({...f,company_id:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${h.company_id?"border-red-500":"border-gray-300"}`,children:[(0,l.jsx)("option",{value:"",children:"Select a company"}),c.map(a=>(0,l.jsx)("option",{value:a.id,children:a.name},a.id))]}),h.company_id&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:h.company_id})]}),b&&(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"is_active",checked:1===f.is_active,onChange:a=>g({...f,is_active:+!!a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active User"})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"Update User":"Create User"})]})]})]})})},p=()=>{let[a,b]=(0,m.useState)([]),[c,d]=(0,m.useState)([]),[e,f]=(0,m.useState)(!0),[g,h]=(0,m.useState)(""),[i,j]=(0,m.useState)(""),[k,p]=(0,m.useState)(""),[q,r]=(0,m.useState)(!1),[s,t]=(0,m.useState)(!1),[u,v]=(0,m.useState)(null),[w,x]=(0,m.useState)(null);(0,m.useEffect)(()=>{y(),z()},[g,i,k]);let y=async()=>{try{let a=localStorage.getItem("token"),c=new URLSearchParams;g&&c.append("search",g),i&&c.append("role",i),k&&c.append("company_id",k);let d=await fetch(`http://localhost:3001/api/admin/users?${c}`,{headers:{Authorization:`Bearer ${a}`}}),e=await d.json();e.success&&b(e.data)}catch(a){console.error("Failed to fetch users:",a)}finally{f(!1)}},z=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/admin/companies",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success&&d(c.data)}catch(a){console.error("Failed to fetch companies:",a)}},A=async a=>{try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/admin/users",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)}),d=await c.json();d.success?(E("success","User created successfully!"),r(!1),y()):E("error",d.error||"Failed to create user")}catch(a){E("error","Failed to create user")}},B=async(a,b)=>{try{let c=localStorage.getItem("token"),d=await fetch(`http://localhost:3001/api/admin/users/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify(b)}),e=await d.json();e.success?(E("success","User updated successfully!"),t(!1),y()):E("error",e.error||"Failed to update user")}catch(a){E("error","Failed to update user")}},C=async a=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{let b=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/admin/users/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success?(E("success","User deleted successfully!"),y()):E("error",d.error||"Failed to delete user")}catch(a){E("error","Failed to delete user")}},D=async(a,b)=>{await B(a,{is_active:+(1!==b)})},E=(a,b)=>{x({type:a,message:b}),setTimeout(()=>x(null),5e3)};return(0,l.jsxs)("div",{className:"space-y-6",children:[w&&(0,l.jsx)("div",{className:`p-4 rounded-lg ${"success"===w.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.message}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,l.jsxs)("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,l.jsx)(n.FWt,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Create User"})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(n.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,l.jsx)("input",{type:"text",placeholder:"Search users...",value:g,onChange:a=>h(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("select",{value:i,onChange:a=>j(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"All Roles"}),(0,l.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,l.jsx)("option",{value:"admin",children:"Admin"}),(0,l.jsx)("option",{value:"manager",children:"Manager"}),(0,l.jsx)("option",{value:"user",children:"User"})]}),(0,l.jsxs)("select",{value:k,onChange:a=>p(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"All Companies"}),c.map(a=>(0,l.jsx)("option",{value:a.id,children:a.name},a.id))]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,l.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(a=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:a.email})]})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"super_admin"===a.role?"bg-purple-100 text-purple-800":"admin"===a.role?"bg-blue-100 text-blue-800":"manager"===a.role?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.role})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.company_name||"N/A"}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${1===a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:1===a.is_active?"Active":"Inactive"})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString()}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,l.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,l.jsx)("button",{onClick:()=>{v(a),t(!0)},className:"text-blue-600 hover:text-blue-900",title:"Edit",children:(0,l.jsx)(n.Pt,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>D(a.id,a.is_active),className:1===a.is_active?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900",title:1===a.is_active?"Deactivate":"Activate",children:1===a.is_active?(0,l.jsx)(n.sut,{className:"w-4 h-4"}):(0,l.jsx)(n.MWd,{className:"w-4 h-4"})}),"super_admin"!==a.role&&(0,l.jsx)("button",{onClick:()=>C(a.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,l.jsx)(n.TBR,{className:"w-4 h-4"})})]})})]},a.id))})]})}),q&&(0,l.jsx)(o,{title:"Create New User",companies:c,onSubmit:A,onClose:()=>r(!1)}),s&&u&&(0,l.jsx)(o,{title:"Edit User",user:u,companies:c,onSubmit:a=>B(u.id,a),onClose:()=>{t(!1),v(null)}})]})},q=()=>{let[a,b]=(0,m.useState)([]),[c,d]=(0,m.useState)(!0),[e,f]=(0,m.useState)(""),[g,h]=(0,m.useState)(!1),[i,j]=(0,m.useState)(!1),[k,o]=(0,m.useState)(null),[p,q]=(0,m.useState)(null);(0,m.useEffect)(()=>{s()},[]);let s=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/admin/companies",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch companies:",a)}finally{d(!1)}},t=async a=>{try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/admin/companies",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)}),d=await c.json();d.success?(v("success","Company created successfully!"),h(!1),s()):v("error",d.error||"Failed to create company")}catch(a){v("error","Failed to create company")}},u=async(a,b)=>{try{let c=localStorage.getItem("token"),d=await fetch(`http://localhost:3001/api/admin/companies/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify(b)}),e=await d.json();e.success?(v("success","Company updated successfully!"),j(!1),s()):v("error",e.error||"Failed to update company")}catch(a){v("error","Failed to update company")}},v=(a,b)=>{q({type:a,message:b}),setTimeout(()=>q(null),5e3)},w=a.filter(a=>a.name.toLowerCase().includes(e.toLowerCase()));return(0,l.jsxs)("div",{className:"space-y-6",children:[p&&(0,l.jsx)("div",{className:`p-4 rounded-lg ${"success"===p.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:p.message}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Company Management"}),(0,l.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,l.jsx)(n.FWt,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Create Company"})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(n.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,l.jsx)("input",{type:"text",placeholder:"Search companies...",value:e,onChange:a=>f(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(a=>(0,l.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow",children:(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(n.t6i,{className:"w-6 h-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.name}),(0,l.jsx)("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full mt-1 ${"enterprise"===a.subscription_plan?"bg-purple-100 text-purple-800":"pro"===a.subscription_plan?"bg-blue-100 text-blue-800":"starter"===a.subscription_plan?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.subscription_plan||"free"})]})]})}),(0,l.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,l.jsx)(n.zWC,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Users"})]}),(0,l.jsxs)("span",{className:"font-semibold text-gray-900",children:[a.user_count||0," / ",a.max_users||5]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-gray-600",children:[(0,l.jsx)(n.BmN,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Projects"})]}),(0,l.jsxs)("span",{className:"font-semibold text-gray-900",children:[a.project_count||0," / ",a.max_projects||10]})]})]}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${1===a.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:1===a.is_active?"Active":"Inactive"})}),(0,l.jsx)("div",{className:"flex space-x-2 pt-4 border-t",children:(0,l.jsxs)("button",{onClick:()=>{o(a),j(!0)},className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100",children:[(0,l.jsx)(n.Pt,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Edit"})]})})]})},a.id))}),g&&(0,l.jsx)(r,{title:"Create New Company",onSubmit:t,onClose:()=>h(!1)}),i&&k&&(0,l.jsx)(r,{title:"Edit Company",company:k,onSubmit:a=>u(k.id,a),onClose:()=>{j(!1),o(null)}})]})},r=({title:a,company:b,onSubmit:c,onClose:d})=>{let[e,f]=(0,m.useState)({name:b?.name||"",subscription_plan:b?.subscription_plan||"free",max_users:b?.max_users||5,max_projects:b?.max_projects||10,is_active:b?.is_active!==void 0?b.is_active:1}),[g,h]=(0,m.useState)({});return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:a}),(0,l.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(s,{className:"w-6 h-6"})})]}),(0,l.jsxs)("form",{onSubmit:a=>{a.preventDefault(),(()=>{let a={};return e.name||(a.name="Company name is required"),e.max_users<1&&(a.max_users="Must be at least 1"),e.max_projects<1&&(a.max_projects="Must be at least 1"),h(a),0===Object.keys(a).length})()&&c(e)},className:"p-6 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Name ",(0,l.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,l.jsx)("input",{type:"text",value:e.name,onChange:a=>f({...e,name:a.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ${g.name?"border-red-500":"border-gray-300"}`}),g.name&&(0,l.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Plan"}),(0,l.jsxs)("select",{value:e.subscription_plan,onChange:a=>f({...e,subscription_plan:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"free",children:"Free"}),(0,l.jsx)("option",{value:"starter",children:"Starter"}),(0,l.jsx)("option",{value:"pro",children:"Pro"}),(0,l.jsx)("option",{value:"enterprise",children:"Enterprise"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Users"}),(0,l.jsx)("input",{type:"number",value:e.max_users,onChange:a=>f({...e,max_users:parseInt(a.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Projects"}),(0,l.jsx)("input",{type:"number",value:e.max_projects,onChange:a=>f({...e,max_projects:parseInt(a.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),b&&(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",id:"is_active",checked:1===e.is_active,onChange:a=>f({...e,is_active:+!!a.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,l.jsx)("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active Company"})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"Update Company":"Create Company"})]})]})]})})},s=({className:a})=>(0,l.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),t=()=>{let[a,b]=(0,m.useState)(null),[c,d]=(0,m.useState)(!0);(0,m.useEffect)(()=>{e();let a=setInterval(e,3e4);return()=>clearInterval(a)},[]);let e=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/admin/system-stats",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch system stats:",a)}finally{d(!1)}},f=a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["Bytes","KB","MB","GB"][b]};return c?(0,l.jsx)("div",{className:"text-center py-8",children:"Loading system stats..."}):(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"System Monitoring"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Health"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-green-600",children:[(0,l.jsx)(n.rAV,{className:"w-5 h-5"}),(0,l.jsx)("span",{className:"font-medium",children:"All Systems Operational"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(n.gq4,{className:"w-6 h-6 text-blue-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Server Uptime"}),(0,l.jsx)("p",{className:"text-xl font-bold text-gray-900",children:a?.performance?.uptime?(a=>{let b=Math.floor(a/86400),c=Math.floor(a%86400/3600),d=Math.floor(a%3600/60);return`${b}d ${c}h ${d}m`})(a.performance.uptime):"N/A"})]})]}),(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,l.jsx)(n.WmV,{className:"w-6 h-6 text-green-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Database Size"}),(0,l.jsx)("p",{className:"text-xl font-bold text-gray-900",children:a?.database?.size||"N/A"}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[a?.database?.tables||0," tables"]})]})]}),(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,l.jsx)(n.Ilq,{className:"w-6 h-6 text-purple-600"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Activity (24h)"}),(0,l.jsx)("p",{className:"text-xl font-bold text-gray-900",children:a?.activity?.last24h?.count||0}),(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:[a?.activity?.last7d?.count||0," in last 7 days"]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Memory Usage"}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:[a?.performance?.memory?f(a.performance.memory.heapUsed):"N/A"," /",a?.performance?.memory?f(a.performance.memory.heapTotal):"N/A"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:a?.performance?.memory?`${a.performance.memory.heapUsed/a.performance.memory.heapTotal*100}%`:"0%"}})})]}),(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"CPU Usage"}),(0,l.jsxs)("span",{className:"text-sm text-gray-600",children:["User: ",a?.performance?.cpu?(a.performance.cpu.user/1e6).toFixed(2):0,"s | System: ",a?.performance?.cpu?(a.performance.cpu.system/1e6).toFixed(2):0,"s"]})]})})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Database Statistics"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,l.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a?.database?.tables||0}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Tables"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a?.database?.records?.total||0}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Total Records"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a?.database?.size||"N/A"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Database Size"})]}),(0,l.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"Healthy"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Status"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity Summary"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Last 24 Hours"}),(0,l.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:a?.activity?.last24h?.count||0})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"User actions and API calls"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Last 7 Days"}),(0,l.jsx)("span",{className:"text-2xl font-bold text-purple-600",children:a?.activity?.last7d?.count||0})]}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"Total platform activity"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Platform"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"CortexBuild v2.0.0"})]}),(0,l.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Node.js Version"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:process.version||"N/A"})]}),(0,l.jsxs)("div",{className:"flex justify-between py-2 border-b",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Environment"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Development"})]}),(0,l.jsxs)("div",{className:"flex justify-between py-2",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"Last Restart"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-900",children:new Date(Date.now()-1e3*(a?.performance?.uptime||0)).toLocaleString()})]})]})]})]})},u=()=>{let[a,b]=(0,m.useState)([]),[c,d]=(0,m.useState)(!0),[e,f]=(0,m.useState)(""),[g,h]=(0,m.useState)(""),[i,j]=(0,m.useState)(1),[k,o]=(0,m.useState)(1);(0,m.useEffect)(()=>{p()},[i,g]);let p=async()=>{try{let a=localStorage.getItem("token"),c=new URLSearchParams;c.append("page",i.toString()),c.append("limit","20"),g&&c.append("action",g);let d=await fetch(`http://localhost:3001/api/admin/activity-logs?${c}`,{headers:{Authorization:`Bearer ${a}`}}),e=await d.json();e.success&&(b(e.data),o(e.pagination.totalPages))}catch(a){console.error("Failed to fetch activity logs:",a)}finally{d(!1)}},q=a.filter(a=>a.description.toLowerCase().includes(e.toLowerCase())||a.user_name?.toLowerCase().includes(e.toLowerCase())||a.user_email?.toLowerCase().includes(e.toLowerCase()));return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Activity Logs"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,l.jsx)(n.Ilq,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:[a.length," activities"]})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(n.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,l.jsx)("input",{type:"text",placeholder:"Search activities...",value:e,onChange:a=>f(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,l.jsxs)("select",{value:g,onChange:a=>h(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"",children:"All Actions"}),(0,l.jsx)("option",{value:"login",children:"Login"}),(0,l.jsx)("option",{value:"logout",children:"Logout"}),(0,l.jsx)("option",{value:"create",children:"Create"}),(0,l.jsx)("option",{value:"update",children:"Update"}),(0,l.jsx)("option",{value:"delete",children:"Delete"}),(0,l.jsx)("option",{value:"password_reset",children:"Password Reset"}),(0,l.jsx)("option",{value:"bulk_action",children:"Bulk Action"}),(0,l.jsx)("option",{value:"notification_sent",children:"Notification Sent"})]})]})}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:q.length>0?q.map(a=>(0,l.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,l.jsx)("div",{className:"flex items-start justify-between",children:(0,l.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,l.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,l.jsx)(n.Ilq,{className:"w-5 h-5 text-blue-600"})}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,l.jsx)("span",{className:"font-medium text-gray-900",children:a.user_name||"Unknown User"}),(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${{login:"bg-green-100 text-green-800",logout:"bg-gray-100 text-gray-800",create:"bg-blue-100 text-blue-800",update:"bg-yellow-100 text-yellow-800",delete:"bg-red-100 text-red-800",password_reset:"bg-purple-100 text-purple-800",bulk_action:"bg-indigo-100 text-indigo-800",notification_sent:"bg-pink-100 text-pink-800"}[a.action]||"bg-gray-100 text-gray-800"}`,children:a.action})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:a.description}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,l.jsx)("span",{children:a.user_email}),(0,l.jsx)("span",{children:"•"}),(0,l.jsx)("span",{children:new Date(a.created_at).toLocaleString()})]})]})]})})},a.id)):(0,l.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No activity logs found"})})}),k>1&&(0,l.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,l.jsx)("button",{onClick:()=>j(a=>Math.max(1,a-1)),disabled:1===i,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,l.jsxs)("span",{className:"px-4 py-2 text-gray-700",children:["Page ",i," of ",k]}),(0,l.jsx)("button",{onClick:()=>j(a=>Math.min(k,a+1)),disabled:i===k,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})},v=()=>{let[a,b]=(0,m.useState)(null),[c,d]=(0,m.useState)(!0),[e,f]=(0,m.useState)("30d");(0,m.useEffect)(()=>{g()},[e]);let g=async()=>{try{let a=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/admin/analytics?period=${e}`,{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch analytics:",a)}finally{d(!1)}};if(c)return(0,l.jsx)("div",{className:"text-center py-8",children:"Loading analytics..."});let h=a=>({enterprise:"bg-purple-100 text-purple-800",pro:"bg-blue-100 text-blue-800",starter:"bg-green-100 text-green-800",free:"bg-gray-100 text-gray-800"})[a]||"bg-gray-100 text-gray-800";return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Platform Analytics"}),(0,l.jsxs)("select",{value:e,onChange:a=>f(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,l.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,l.jsx)("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsx)(w,{title:"User Growth",data:a?.userGrowth||[],icon:n.zWC,color:"blue"}),(0,l.jsx)(w,{title:"Company Growth",data:a?.companyGrowth||[],icon:n.t6i,color:"green"}),(0,l.jsx)(w,{title:"Project Growth",data:a?.projectGrowth||[],icon:n.BmN,color:"purple"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[(0,l.jsx)(n.t6i,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{children:"Top Companies"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Company"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Users"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Projects"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a?.topCompanies.map((a,b)=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${h(a.subscription_plan)}`,children:a.subscription_plan})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.user_count}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.project_count})]},b))})]})})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[(0,l.jsx)(n.rW1,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{children:"Subscription Distribution"})]}),(0,l.jsx)("div",{className:"space-y-3",children:a?.subscriptionDistribution.map((a,b)=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center space-x-3",children:(0,l.jsx)("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${h(a.subscription_plan)}`,children:a.subscription_plan})}),(0,l.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:a.count})]},b))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2",children:[(0,l.jsx)(n.zWC,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{children:"Role Distribution"})]}),(0,l.jsx)("div",{className:"space-y-3",children:a?.roleDistribution.map((a,b)=>(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:a.role}),(0,l.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:a.count})]},b))})]})]})]})},w=({title:a,data:b,icon:c,color:d})=>{let e=b.reduce((a,b)=>a+b.count,0),f=b[0]?.count||0,g=b[1]?.count||0,h=g>0?((f-g)/g*100).toFixed(1):"0";return(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:a}),(0,l.jsx)("div",{className:`p-2 rounded-lg ${{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600"}[d]}`,children:(0,l.jsx)(c,{className:"w-5 h-5"})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.ntg,{className:`w-4 h-4 ${parseFloat(h)>=0?"text-green-600":"text-red-600"}`}),(0,l.jsxs)("span",{className:`text-sm font-medium ${parseFloat(h)>=0?"text-green-600":"text-red-600"}`,children:[h,"%"]}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"vs previous period"})]})]}),(0,l.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,l.jsxs)("p",{className:"text-xs text-gray-500",children:["Recent: ",b.slice(0,3).map(a=>a.count).join(", ")]})})]})},x=()=>{let[a,b]=(0,m.useState)([]),[c,d]=(0,m.useState)(!0),[e,f]=(0,m.useState)("overview");(0,m.useEffect)(()=>{g()},[]);let g=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/marketplace/installed",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch installed modules:",a)}finally{d(!1)}},h=async(a,b)=>{try{let c=localStorage.getItem("token");(await fetch(`http://localhost:3001/api/marketplace/configure/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({config:{is_active:!b}})})).ok&&g()}catch(a){console.error("Failed to toggle module status:",a)}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Developer Platform"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,l.jsx)(n.CyN,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Module Management & API Tools"})]})]}),(0,l.jsx)("div",{className:"border-b border-gray-200",children:(0,l.jsx)("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:n.lPX},{id:"modules",label:"Installed Modules",icon:n.KqI},{id:"api",label:"API Documentation",icon:n.E3I},{id:"webhooks",label:"Webhooks",icon:n.wB_}].map(a=>(0,l.jsxs)("button",{onClick:()=>f(a.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${e===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,l.jsx)(a.icon,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:a.label})]},a.id))})}),"overview"===e&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Installed Modules"}),(0,l.jsx)(n.lPX,{className:"w-8 h-8 text-blue-600"})]}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:a.length}),(0,l.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[a.filter(a=>a.is_active).length," active"]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"API Endpoints"}),(0,l.jsx)(n.CyN,{className:"w-8 h-8 text-green-600"})]}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"13"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Core + Module APIs"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-gray-600",children:"Webhooks"}),(0,l.jsx)(n.KqI,{className:"w-8 h-8 text-purple-600"})]}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:"0"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"No webhooks configured"})]})]}),"modules"===e&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Installed Modules"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage and configure your installed modules"})]}),(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:c?(0,l.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading modules..."}):0===a.length?(0,l.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No modules installed yet. Visit the Marketplace to install modules."}):a.map(a=>(0,l.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:a.name}),(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.is_active?"Active":"Inactive"})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,l.jsxs)("span",{children:["Version: ",a.version]}),(0,l.jsx)("span",{children:"•"}),(0,l.jsxs)("span",{children:["Category: ",a.category]}),(0,l.jsx)("span",{children:"•"}),(0,l.jsxs)("span",{children:["Installed: ",new Date(a.installed_at).toLocaleDateString()]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,l.jsx)("button",{onClick:()=>h(a.module_id,a.is_active),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a.is_active?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:a.is_active?"Deactivate":"Activate"}),(0,l.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Configure"})]})]})},a.id))})]}),"api"===e&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Documentation"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Marketplace API"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 font-mono text-xs rounded",children:"GET"}),(0,l.jsx)("code",{className:"text-gray-700",children:"/api/marketplace/modules"}),(0,l.jsx)("span",{className:"text-gray-500",children:"- Browse available modules"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 font-mono text-xs rounded",children:"POST"}),(0,l.jsx)("code",{className:"text-gray-700",children:"/api/marketplace/install"}),(0,l.jsx)("span",{className:"text-gray-500",children:"- Install a module"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 font-mono text-xs rounded",children:"DELETE"}),(0,l.jsx)("code",{className:"text-gray-700",children:"/api/marketplace/uninstall/:id"}),(0,l.jsx)("span",{className:"text-gray-500",children:"- Uninstall a module"})]})]})]}),(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Widgets API"}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 font-mono text-xs rounded",children:"GET"}),(0,l.jsx)("code",{className:"text-gray-700",children:"/api/widgets/dashboards"}),(0,l.jsx)("span",{className:"text-gray-500",children:"- Get user dashboards"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 font-mono text-xs rounded",children:"POST"}),(0,l.jsx)("code",{className:"text-gray-700",children:"/api/widgets/add"}),(0,l.jsx)("span",{className:"text-gray-500",children:"- Add widget to dashboard"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 font-mono text-xs rounded",children:"PUT"}),(0,l.jsx)("code",{className:"text-gray-700",children:"/api/widgets/:id"}),(0,l.jsx)("span",{className:"text-gray-500",children:"- Update widget configuration"})]})]})]})]})]}),"webhooks"===e&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Webhooks"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure webhooks to receive real-time events"})]}),(0,l.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Webhook"})]}),(0,l.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,l.jsx)(n.KqI,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{children:"No webhooks configured yet"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:"Create your first webhook to start receiving events"})]})]})]})};var y=c(7373),z=c(96596);let A=()=>{let[a,b]=(0,m.useState)("create"),[c,d]=(0,m.useState)({name:"",slug:"",description:"",category:"utilities",version:"1.0.0",code:"",config_schema:{}}),[e,f]=(0,m.useState)(null),g=`// CortexBuild Module Template
// Module Name: ${c.name||"My Module"}
// Version: ${c.version}

export class ${c.slug?.replace(/-/g,"_")||"MyModule"} {
  constructor(config) {
    this.config = config;
  }

  // Initialize module
  async init() {
    console.log('Module initialized');
  }

  // Main execution function
  async execute(input) {
    // Your module logic here
    return {
      success: true,
      data: input
    };
  }

  // Cleanup function
  async cleanup() {
    console.log('Module cleanup');
  }
}

// Export module metadata
export const metadata = {
  name: '${c.name}',
  version: '${c.version}',
  description: '${c.description}',
  category: '${c.category}',
  author: 'Your Name',
  permissions: ['read', 'write'],
  dependencies: []
};
`,h=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/admin/modules/create",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({...c,code:g,status:"draft"})}),d=await b.json();d.success?alert("Module created successfully!"):alert(d.error||"Failed to create module")}catch(a){console.error("Failed to create module:",a),alert("Failed to create module")}},i=async()=>{if(confirm("Publish this module to the marketplace?"))try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/admin/modules/publish",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(c)});(await b.json()).success&&alert("Module published successfully!")}catch(a){console.error("Failed to publish module:",a)}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Module Development SDK"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Create, test, and publish custom modules"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.CyN,{className:"w-5 h-5 text-blue-600"}),(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"SDK v2.0"})]})]}),(0,l.jsx)("div",{className:"border-b border-gray-200",children:(0,l.jsx)("nav",{className:"flex space-x-8",children:[{id:"create",label:"Create Module",icon:n.lPX},{id:"test",label:"Test & Debug",icon:n.jGG},{id:"docs",label:"Documentation",icon:n.E3I},{id:"publish",label:"Publish",icon:n._OO}].map(c=>(0,l.jsxs)("button",{onClick:()=>b(c.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${a===c.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,l.jsx)(c.icon,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:c.label})]},c.id))})}),"create"===a&&(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Module Configuration"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module Name"}),(0,l.jsx)("input",{type:"text",value:c.name,onChange:a=>d({...c,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"My Awesome Module"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),(0,l.jsx)("input",{type:"text",value:c.slug,onChange:a=>d({...c,slug:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"my-awesome-module"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,l.jsx)("textarea",{value:c.description,onChange:a=>d({...c,description:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Describe what your module does..."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,l.jsxs)("select",{value:c.category,onChange:a=>d({...c,category:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"analytics",children:"Analytics"}),(0,l.jsx)("option",{value:"automation",children:"Automation"}),(0,l.jsx)("option",{value:"communication",children:"Communication"}),(0,l.jsx)("option",{value:"finance",children:"Finance"}),(0,l.jsx)("option",{value:"project-management",children:"Project Management"}),(0,l.jsx)("option",{value:"integrations",children:"Integrations"}),(0,l.jsx)("option",{value:"utilities",children:"Utilities"}),(0,l.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Version"}),(0,l.jsx)("input",{type:"text",value:c.version,onChange:a=>d({...c,version:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"1.0.0"})]}),(0,l.jsxs)("button",{onClick:h,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,l.jsx)(n.lPX,{className:"w-4 h-4 inline mr-2"}),"Create Module"]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Module Code"}),(0,l.jsxs)("button",{className:"text-sm text-blue-600 hover:text-blue-700",children:[(0,l.jsx)(n.f5X,{className:"w-4 h-4 inline mr-1"}),"Download Template"]})]}),(0,l.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 overflow-auto",style:{maxHeight:"500px"},children:(0,l.jsx)("pre",{className:"text-sm text-green-400 font-mono",children:(0,l.jsx)("code",{children:g})})})]})]}),"test"===a&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Your Module"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Input (JSON)"}),(0,l.jsx)("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:6,placeholder:'{"key": "value"}'})]}),(0,l.jsxs)("button",{onClick:()=>{f({status:"success",message:"Module test passed",execution_time:"45ms",memory_used:"2.3MB",tests_passed:5,tests_failed:0})},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,l.jsx)(n.jGG,{className:"w-4 h-4 inline mr-2"}),"Run Test"]}),e&&(0,l.jsxs)("div",{className:`p-4 rounded-lg ${"success"===e.status?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:["success"===e.status?(0,l.jsx)(n.rAV,{className:"w-5 h-5 text-green-600"}):(0,l.jsx)(n.RIJ,{className:"w-5 h-5 text-red-600"}),(0,l.jsx)("span",{className:"font-semibold",children:e.message})]}),(0,l.jsxs)("div",{className:"text-sm space-y-1",children:[(0,l.jsxs)("p",{children:["Execution Time: ",e.execution_time]}),(0,l.jsxs)("p",{children:["Memory Used: ",e.memory_used]}),(0,l.jsxs)("p",{children:["Tests Passed: ",e.tests_passed,"/",e.tests_passed+e.tests_failed]})]})]})]})]}),"docs"===a&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Module Development Guide"}),(0,l.jsxs)("div",{className:"prose max-w-none",children:[(0,l.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Getting Started"}),(0,l.jsx)("p",{className:"text-gray-700 mb-4",children:"CortexBuild modules are JavaScript/TypeScript classes that extend the platform's functionality. Each module must implement the required interface and export metadata."}),(0,l.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Required Methods"}),(0,l.jsxs)("ul",{className:"list-disc list-inside text-gray-700 space-y-2 mb-4",children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"init()"})," - Initialize your module"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"execute(input)"})," - Main execution logic"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"cleanup()"})," - Cleanup resources"]})]}),(0,l.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:"Best Practices"}),(0,l.jsxs)("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[(0,l.jsx)("li",{children:"Always validate input data"}),(0,l.jsx)("li",{children:"Handle errors gracefully"}),(0,l.jsx)("li",{children:"Use async/await for asynchronous operations"}),(0,l.jsx)("li",{children:"Document your code with JSDoc comments"}),(0,l.jsx)("li",{children:"Test thoroughly before publishing"})]})]})]}),"publish"===a&&(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Publish to Marketplace"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,l.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Pre-publish Checklist"}),(0,l.jsxs)("ul",{className:"space-y-2 text-sm text-blue-800",children:[(0,l.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.rAV,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Module tested and working"})]}),(0,l.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.rAV,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Documentation complete"})]}),(0,l.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.rAV,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Version number updated"})]}),(0,l.jsxs)("li",{className:"flex items-center space-x-2",children:[(0,l.jsx)(n.rAV,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"Category selected"})]})]})]}),(0,l.jsxs)("button",{onClick:i,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold",children:[(0,l.jsx)(n._OO,{className:"w-5 h-5 inline mr-2"}),"Publish to Marketplace"]})]})]})]})},B=()=>{let[a,b]=(0,m.useState)([]),[c,d]=(0,m.useState)([]),[e,f]=(0,m.useState)(!1),[g,h]=(0,m.useState)(null);(0,m.useEffect)(()=>{i(),j()},[]);let i=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/smart-tools",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch tools:",a)}},j=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/smart-tools/executions",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success&&d(c.data)}catch(a){console.error("Failed to fetch executions:",a)}},k=async a=>{try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/smart-tools",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)});(await c.json()).success&&(i(),f(!1))}catch(a){console.error("Failed to create tool:",a)}},o=async(a,b)=>{try{let c=localStorage.getItem("token");await fetch(`http://localhost:3001/api/smart-tools/${a}/toggle`,{method:"PUT",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({is_active:!b})}),i()}catch(a){console.error("Failed to toggle tool:",a)}},p=async a=>{try{let b=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/smart-tools/${a}/run`,{method:"POST",headers:{Authorization:`Bearer ${b}`}});(await c.json()).success&&(alert("Tool executed successfully!"),j())}catch(a){console.error("Failed to run tool:",a)}},q=async a=>{if(confirm("Delete this smart tool?"))try{let b=localStorage.getItem("token");await fetch(`http://localhost:3001/api/smart-tools/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),i()}catch(a){console.error("Failed to delete tool:",a)}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Smart Tools & Automation"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Schedule tasks, create workflows, and automate processes"})]}),(0,l.jsxs)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,l.jsx)(n.FWt,{className:"w-4 h-4 inline mr-2"}),"Create Smart Tool"]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Smart Tools"})}),(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:0===a.length?(0,l.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,l.jsx)(n.KqI,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{children:"No smart tools created yet"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:"Create your first automation tool to get started"})]}):a.map(a=>(0,l.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,l.jsx)("div",{className:`p-2 rounded-lg ${a.is_active?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:(a=>{switch(a){case"scheduled":return(0,l.jsx)(n.zD7,{className:"w-5 h-5"});case"webhook":default:return(0,l.jsx)(n.KqI,{className:"w-5 h-5"});case"workflow":return(0,l.jsx)(n.Ilq,{className:"w-5 h-5"})}})(a.tool_type)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:a.name}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:a.description})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500 mt-3",children:[(0,l.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,l.jsx)(n.VvS,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["Schedule: ",a.schedule||"Manual"]})]}),a.last_run_at&&(0,l.jsxs)("span",{children:["Last run: ",new Date(a.last_run_at).toLocaleString()]}),a.next_run_at&&(0,l.jsxs)("span",{children:["Next run: ",new Date(a.next_run_at).toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,l.jsx)("button",{onClick:()=>p(a.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Run now",children:(0,l.jsx)(n.jGG,{className:"w-5 h-5"})}),(0,l.jsx)("button",{onClick:()=>o(a.id,a.is_active),className:`p-2 rounded-lg transition-colors ${a.is_active?"text-yellow-600 hover:bg-yellow-50":"text-blue-600 hover:bg-blue-50"}`,title:a.is_active?"Pause":"Activate",children:a.is_active?(0,l.jsx)(n.vRz,{className:"w-5 h-5"}):(0,l.jsx)(n.jGG,{className:"w-5 h-5"})}),(0,l.jsx)("button",{onClick:()=>q(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:(0,l.jsx)(n.TBR,{className:"w-5 h-5"})})]})]})},a.id))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Executions"})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tool"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Started"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Error"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===c.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No executions yet"})}):c.map(b=>{let c=a.find(a=>a.id===b.tool_id),d=b.completed_at?Math.round((new Date(b.completed_at).getTime()-new Date(b.started_at).getTime())/1e3):null;return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c?.name||"Unknown"}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${(a=>{switch(a){case"success":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(b.status)}`,children:b.status})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.started_at).toLocaleString()}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:d?`${d}s`:"-"}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-red-600",children:b.error_message||"-"})]},b.id)})})]})})]}),e&&(0,l.jsx)(C,{onClose:()=>f(!1),onCreate:k})]})},C=({onClose:a,onCreate:b})=>{let[c,d]=(0,m.useState)({name:"",description:"",tool_type:"scheduled",schedule:"0 0 * * *",config:"{}"});return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Smart Tool"}),(0,l.jsxs)("form",{onSubmit:a=>{a.preventDefault(),b(c)},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,l.jsx)("input",{type:"text",value:c.name,onChange:a=>d({...c,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,l.jsx)("textarea",{value:c.description,onChange:a=>d({...c,description:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,l.jsxs)("select",{value:c.tool_type,onChange:a=>d({...c,tool_type:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,l.jsx)("option",{value:"scheduled",children:"Scheduled (Cron)"}),(0,l.jsx)("option",{value:"webhook",children:"Webhook Trigger"}),(0,l.jsx)("option",{value:"workflow",children:"Workflow Chain"})]})]}),"scheduled"===c.tool_type&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Schedule (Cron Expression)"}),(0,l.jsx)("input",{type:"text",value:c.schedule,onChange:a=>d({...c,schedule:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0 0 * * *"}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:'Examples: "0 0 * * *" (daily), "0 */6 * * *" (every 6 hours)'})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Tool"})]})]})]})})},D=()=>{let[a,b]=(0,m.useState)([]),[c,d]=(0,m.useState)([]),[e,f]=(0,m.useState)(!1);(0,m.useEffect)(()=>{g(),h()},[]);let g=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/webhooks",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch webhooks:",a)}},h=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/webhooks/logs",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success&&d(c.data)}catch(a){console.error("Failed to fetch logs:",a)}},i=async a=>{try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/webhooks",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)});(await c.json()).success&&(g(),f(!1))}catch(a){console.error("Failed to create webhook:",a)}},j=async a=>{if(confirm("Delete this webhook?"))try{let b=localStorage.getItem("token");await fetch(`http://localhost:3001/api/webhooks/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),g()}catch(a){console.error("Failed to delete webhook:",a)}},k=async a=>{try{let b=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/webhooks/${a}/test`,{method:"POST",headers:{Authorization:`Bearer ${b}`}});(await c.json()).success&&(alert("Test webhook sent successfully!"),h())}catch(a){console.error("Failed to test webhook:",a)}};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Webhook Management"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Configure webhooks to receive real-time event notifications"})]}),(0,l.jsxs)("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,l.jsx)(n.FWt,{className:"w-4 h-4 inline mr-2"}),"Create Webhook"]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Webhooks"})}),(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:0===a.length?(0,l.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,l.jsx)(n.KD0,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,l.jsx)("p",{children:"No webhooks configured yet"}),(0,l.jsx)("p",{className:"text-sm mt-2",children:"Create your first webhook to start receiving events"})]}):a.map(a=>(0,l.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,l.jsx)(n.KD0,{className:"w-5 h-5 text-blue-600"}),(0,l.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:a.name}),(0,l.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:a.is_active?"Active":"Inactive"})]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["URL: ",a.url]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,l.jsxs)("span",{children:["Events: ",a.events.join(", ")]}),a.last_triggered_at&&(0,l.jsxs)("span",{children:["Last triggered: ",new Date(a.last_triggered_at).toLocaleString()]})]}),(0,l.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,l.jsxs)("code",{className:"px-2 py-1 bg-gray-100 text-xs rounded",children:["Secret: ",a.secret.substring(0,20),"..."]}),(0,l.jsx)("button",{onClick:()=>{var b;return b=a.secret,void(navigator.clipboard.writeText(b),alert("Secret copied to clipboard!"))},className:"text-blue-600 hover:text-blue-700",children:(0,l.jsx)(n.QRo,{className:"w-4 h-4"})})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,l.jsx)("button",{onClick:()=>k(a.id),className:"px-3 py-1 bg-green-100 text-green-800 rounded-lg hover:bg-green-200 transition-colors text-sm",children:"Test"}),(0,l.jsx)("button",{onClick:()=>j(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,l.jsx)(n.TBR,{className:"w-5 h-5"})})]})]})},a.id))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,l.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Webhook Calls"})}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,l.jsx)("thead",{className:"bg-gray-50",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Webhook"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Event"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Response"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"})]})}),(0,l.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===c.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No webhook calls yet"})}):c.map(b=>{let c=a.find(a=>a.id===b.webhook_id);return(0,l.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:c?.name||"Unknown"}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.event_type}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"success"===b.status?(0,l.jsx)(n.rAV,{className:"w-5 h-5 text-green-600"}):(0,l.jsx)(n.Jpz,{className:"w-5 h-5 text-red-600"})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.response_code}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.created_at).toLocaleString()})]},b.id)})})]})})]}),e&&(0,l.jsx)(E,{onClose:()=>f(!1),onCreate:i})]})},E=({onClose:a,onCreate:b})=>{let[c,d]=(0,m.useState)({name:"",url:"",events:[]});return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Create Webhook"}),(0,l.jsxs)("form",{onSubmit:a=>{a.preventDefault(),b(c)},className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,l.jsx)("input",{type:"text",value:c.name,onChange:a=>d({...c,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),(0,l.jsx)("input",{type:"url",value:c.url,onChange:a=>d({...c,url:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"https://your-domain.com/webhook",required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Events to Subscribe"}),(0,l.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg p-3",children:["project.created","project.updated","project.deleted","invoice.created","invoice.paid","invoice.overdue","client.created","client.updated","task.created","task.completed"].map(a=>(0,l.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:c.events.includes(a),onChange:()=>(a=>{d(b=>({...b,events:b.events.includes(a)?b.events.filter(b=>b!==a):[...b.events,a]}))})(a),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:a})]},a))})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Webhook"})]})]})]})})};var F=c(26456);!function(){var a=Error("Cannot find module '../../sdk/SDKDeveloperEnvironment'");throw a.code="MODULE_NOT_FOUND",a}(),function(){var a=Error("Cannot find module '../../admin/UserAccessControl'");throw a.code="MODULE_NOT_FOUND",a}(),function(){var a=Error("Cannot find module '../../admin/UsageMonitoringDashboard'");throw a.code="MODULE_NOT_FOUND",a}(),function(){var a=Error("Cannot find module '../../admin/DatabaseCapabilityManager'");throw a.code="MODULE_NOT_FOUND",a}(),function(){var a=Error("Cannot find module '../../workflow/WorkflowCanvas'");throw a.code="MODULE_NOT_FOUND",a}();let G=()=>{let[a,b]=(0,m.useState)(null),[c,d]=(0,m.useState)(!0),[e,f]=(0,m.useState)("overview"),[g,h]=(0,m.useState)(null);(0,m.useEffect)(()=>{(async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/auth/me",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success&&h(c.user)}catch(a){console.error("Failed to fetch current user:",a)}})()},[]),(0,m.useEffect)(()=>{i()},[]);let i=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/admin/dashboard",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&b(d.data)}catch(a){console.error("Failed to fetch dashboard stats:",a)}finally{d(!1)}};return c?(0,l.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,l.jsx)("div",{className:"text-xl",children:"Loading Super Admin Dashboard..."})}):(0,l.jsxs)("div",{className:"p-8 bg-gray-50 min-h-screen",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin Dashboard"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Complete platform control and management"})]}),(0,l.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,l.jsx)("nav",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:n.ntg},{id:"users",label:"User Management",icon:n.zWC},{id:"companies",label:"Company Management",icon:n.t6i},{id:"marketplace",label:"Marketplace",icon:n.lPX},{id:"sdk-env",label:"SDK Developer",icon:n.fX},{id:"access-control",label:"Access Control",icon:n.ekZ},{id:"usage-monitoring",label:"Usage Monitoring",icon:n.Ilq},{id:"database-manager",label:"Database Manager",icon:n.akk},{id:"workflow-builder",label:"Workflow Builder",icon:n.ZrO},{id:"developer",label:"Developer Platform",icon:n.CyN},{id:"dashboards",label:"Dashboard Builder",icon:n.xA9},{id:"sdk",label:"Module SDK",icon:n.CyN},{id:"automation",label:"Smart Tools",icon:n.KqI},{id:"webhooks",label:"Webhooks",icon:n.KD0},{id:"reviews",label:"Reviews",icon:n.FEq},{id:"analytics",label:"Analytics",icon:n.VH9},{id:"logs",label:"Activity Logs",icon:n.iUU},{id:"system",label:"System Monitoring",icon:n.WmV}].map(a=>(0,l.jsxs)("button",{onClick:()=>f(a.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${e===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,l.jsx)(a.icon,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:a.label})]},a.id))})}),"overview"===e&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsx)(H,{title:"Total Users",value:a?.totalUsers?.count||0,icon:n.zWC,color:"blue",subtitle:`${a?.activeUsers?.count||0} active`}),(0,l.jsx)(H,{title:"Total Companies",value:a?.totalCompanies?.count||0,icon:n.t6i,color:"green"}),(0,l.jsx)(H,{title:"Total Projects",value:a?.totalProjects?.count||0,icon:n.Ilq,color:"purple"}),(0,l.jsx)(H,{title:"Total Clients",value:a?.totalClients?.count||0,icon:n.WmV,color:"orange"})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Activity"}),(0,l.jsx)("div",{className:"space-y-3",children:a?.recentActivity&&a.recentActivity.length>0?a.recentActivity.map((a,b)=>(0,l.jsxs)("div",{className:"flex items-center justify-between py-2 border-b",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)(n.Ilq,{className:"w-5 h-5 text-gray-400"}),(0,l.jsx)("span",{className:"text-sm text-gray-700",children:a.description||"Activity"})]}),(0,l.jsx)("span",{className:"text-xs text-gray-500",children:a.created_at})]},b)):(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activity"})})]})]}),"users"===e&&(0,l.jsx)(p,{}),"companies"===e&&(0,l.jsx)(q,{}),"marketplace"===e&&(0,l.jsx)(y.MarketplacePage,{}),"sdk-env"===e&&g&&(0,l.jsx)(Object(function(){var a=Error("Cannot find module '../../sdk/SDKDeveloperEnvironment'");throw a.code="MODULE_NOT_FOUND",a}()),{user:g}),"access-control"===e&&(0,l.jsx)(Object(function(){var a=Error("Cannot find module '../../admin/UserAccessControl'");throw a.code="MODULE_NOT_FOUND",a}()),{}),"usage-monitoring"===e&&(0,l.jsx)(Object(function(){var a=Error("Cannot find module '../../admin/UsageMonitoringDashboard'");throw a.code="MODULE_NOT_FOUND",a}()),{}),"database-manager"===e&&(0,l.jsx)(Object(function(){var a=Error("Cannot find module '../../admin/DatabaseCapabilityManager'");throw a.code="MODULE_NOT_FOUND",a}()),{}),"workflow-builder"===e&&(0,l.jsx)(Object(function(){var a=Error("Cannot find module '../../workflow/WorkflowCanvas'");throw a.code="MODULE_NOT_FOUND",a}()),{}),"developer"===e&&(0,l.jsx)(x,{}),"dashboards"===e&&(0,l.jsx)(z.DashboardBuilder,{}),"sdk"===e&&(0,l.jsx)(A,{}),"automation"===e&&(0,l.jsx)(B,{}),"webhooks"===e&&(0,l.jsx)(D,{}),"reviews"===e&&(0,l.jsx)(F.ModuleReviews,{}),"analytics"===e&&(0,l.jsx)(v,{}),"logs"===e&&(0,l.jsx)(u,{}),"system"===e&&(0,l.jsx)(t,{})]})},H=({title:a,value:b,icon:c,color:d,subtitle:e})=>(0,l.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:a}),(0,l.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:b}),e&&(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e})]}),(0,l.jsx)("div",{className:`p-3 rounded-lg ${{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"}[d]}`,children:(0,l.jsx)(c,{className:"w-6 h-6"})})]})});var I=c(12289);let J=(0,g.M)(d,"default"),K=(0,g.M)(d,"getStaticProps"),L=(0,g.M)(d,"getStaticPaths"),M=(0,g.M)(d,"getServerSideProps"),N=(0,g.M)(d,"config"),O=(0,g.M)(d,"reportWebVitals"),P=(0,g.M)(d,"unstable_getStaticProps"),Q=(0,g.M)(d,"unstable_getStaticPaths"),R=(0,g.M)(d,"unstable_getStaticParams"),S=(0,g.M)(d,"unstable_getServerProps"),T=(0,g.M)(d,"unstable_getServerSideProps"),U=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/SuperAdminDashboard",pathname:"/SuperAdminDashboard",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:k(),Document:i()},userland:d}),V=(0,I.U)({srcPage:"/SuperAdminDashboard",config:N,userland:d,routeModule:U,getStaticPaths:L,getStaticProps:K,getServerSideProps:M})},82015:a=>{a.exports=require("react")},96596:(a,b,c)=>{c.r(b),c.d(b,{DashboardBuilder:()=>g});var d=c(8732),e=c(82015),f=c(74952);let g=()=>{let[a,b]=(0,e.useState)([]),[c,g]=(0,e.useState)(null),[h,i]=(0,e.useState)([]),[j,k]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(null);(0,e.useEffect)(()=>{p()},[]),(0,e.useEffect)(()=>{c&&q(c.id)},[c]);let p=async()=>{try{let a=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/widgets/dashboards",{headers:{Authorization:`Bearer ${a}`}}),d=await c.json();d.success&&(b(d.data),d.data.length>0&&g(d.data.find(a=>a.is_default)||d.data[0]))}catch(a){console.error("Failed to fetch dashboards:",a)}},q=async a=>{try{let b=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/widgets/dashboard/${a}/widgets`,{headers:{Authorization:`Bearer ${b}`}}),d=await c.json();d.success&&i(d.data)}catch(a){console.error("Failed to fetch widgets:",a)}},r=async()=>{let a=prompt("Enter dashboard name:");if(a)try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/widgets/dashboards",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({name:a,layout:"[]"})});(await c.json()).success&&p()}catch(a){console.error("Failed to create dashboard:",a)}},s=async a=>{if(!c)return;let b=prompt(`Enter ${a} widget title:`);if(b)try{let d=localStorage.getItem("token"),e=await fetch("http://localhost:3001/api/widgets/add",{method:"POST",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({dashboard_id:c.id,widget_type:a,title:b,config:"{}",position_x:0,position_y:2*h.length,width:4,height:2})});(await e.json()).success&&(q(c.id),m(!1))}catch(a){console.error("Failed to add widget:",a)}},t=async(a,b,c)=>{try{let d=localStorage.getItem("token");await fetch(`http://localhost:3001/api/widgets/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({position_x:b,position_y:c})})}catch(a){console.error("Failed to update widget position:",a)}},u=async a=>{if(confirm("Delete this widget?"))try{let b=localStorage.getItem("token");await fetch(`http://localhost:3001/api/widgets/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}}),c&&q(c.id)}catch(a){console.error("Failed to delete widget:",a)}},v=a=>{a.preventDefault()};return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Builder"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Create and customize your perfect dashboard"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("button",{onClick:()=>k(!j),className:`px-4 py-2 rounded-lg font-medium transition-colors ${j?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.eMP,{className:"w-4 h-4 inline mr-2"}),"Save"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(f.ffu,{className:"w-4 h-4 inline mr-2"}),"Edit"]})}),(0,d.jsxs)("button",{onClick:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,d.jsx)(f.FWt,{className:"w-4 h-4 inline mr-2"}),"New Dashboard"]})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Dashboard:"}),(0,d.jsx)("select",{value:c?.id||"",onChange:b=>{g(a.find(a=>a.id===parseInt(b.target.value))||null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:a.map(a=>(0,d.jsxs)("option",{value:a.id,children:[a.name," ",a.is_default?"(Default)":""]},a.id))})]})}),j&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Add Widget"}),(0,d.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{type:"stats",label:"Stats Card",icon:f.Ilq},{type:"chart",label:"Chart",icon:f.VH9},{type:"table",label:"Data Table",icon:f.XIK},{type:"pie",label:"Pie Chart",icon:f.rW1}].map(a=>(0,d.jsxs)("button",{onClick:()=>s(a.type),className:"p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,d.jsx)(a.icon,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),(0,d.jsx)("p",{className:"text-sm font-medium text-gray-700",children:a.label})]},a.type))})]}),(0,d.jsx)("div",{className:"grid grid-cols-12 gap-4",children:h.map(a=>(0,d.jsxs)("div",{draggable:j,onDragStart:()=>{o(a)},onDragOver:v,onDrop:b=>{var d,e;return d=a.position_x,e=a.position_y,void(b.preventDefault(),n&&(t(n.id,d,e),o(null),c&&q(c.id)))},className:`bg-white rounded-lg shadow p-6 ${j?"cursor-move border-2 border-dashed border-blue-300":""}`,style:{gridColumn:`span ${a.width}`,gridRow:`span ${a.height}`},children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(a=>{switch(a){case"chart":return(0,d.jsx)(f.VH9,{className:"w-5 h-5"});case"table":return(0,d.jsx)(f.XIK,{className:"w-5 h-5"});case"stats":return(0,d.jsx)(f.Ilq,{className:"w-5 h-5"});case"pie":return(0,d.jsx)(f.rW1,{className:"w-5 h-5"});default:return(0,d.jsx)(f.xA9,{className:"w-5 h-5"})}})(a.widget_type),(0,d.jsx)("h3",{className:"font-semibold text-gray-900",children:a.title})]}),j&&(0,d.jsx)("div",{className:"flex items-center space-x-2",children:(0,d.jsx)("button",{onClick:()=>u(a.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:(0,d.jsx)(f.TBR,{className:"w-4 h-4"})})})]}),(0,d.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,d.jsx)("p",{className:"text-sm",children:"Widget content will appear here"}),(0,d.jsxs)("p",{className:"text-xs mt-1",children:["Type: ",a.widget_type]})]})]},a.id))}),0===h.length&&(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,d.jsx)(f.xA9,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No widgets yet"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:'Click "Edit" and add your first widget to get started'})]})]})})}}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[5611,157,4952,7373,6456],()=>b(b.s=68005));module.exports=c})();