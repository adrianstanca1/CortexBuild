"use strict";exports.id=6456,exports.ids=[6456],exports.modules={26456:(a,b,c)=>{c.r(b),c.d(b,{ModuleReviews:()=>g});var d=c(8732),e=c(82015),f=c(74952);let g=({moduleId:a})=>{let[b,c]=(0,e.useState)([]),[g,i]=(0,e.useState)(!1),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)("recent");(0,e.useEffect)(()=>{n()},[a,j,l]);let n=async()=>{try{let b=localStorage.getItem("token"),d=new URLSearchParams;a&&d.append("module_id",a.toString()),j&&d.append("rating",j.toString()),d.append("sort",l);let e=await fetch(`http://localhost:3001/api/module-reviews?${d}`,{headers:{Authorization:`Bearer ${b}`}}),f=await e.json();f.success&&c(f.data)}catch(a){console.error("Failed to fetch reviews:",a)}},o=async a=>{try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/module-reviews",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(a)});(await c.json()).success&&(n(),i(!1))}catch(a){console.error("Failed to submit review:",a)}},p=async a=>{try{let b=localStorage.getItem("token");await fetch(`http://localhost:3001/api/module-reviews/${a}/helpful`,{method:"POST",headers:{Authorization:`Bearer ${b}`}}),n()}catch(a){console.error("Failed to mark helpful:",a)}},q=(a,b="md")=>{let c={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return(0,d.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(e=>(0,d.jsx)(f.FEq,{className:`${c[b]} ${e<=a?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},e))})},r=b.length>0?(b.reduce((a,b)=>a+b.rating,0)/b.length).toFixed(1):"0.0",s=(()=>{let a={5:0,4:0,3:0,2:0,1:0};return b.forEach(b=>{a[b.rating]++}),a})();return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Module Reviews"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Read and write reviews for marketplace modules"})]}),a&&(0,d.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,d.jsx)(f.vEG,{className:"w-4 h-4 inline mr-2"}),"Write Review"]})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-5xl font-bold text-gray-900 mb-2",children:r}),q(parseFloat(r),"lg"),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[b.length," reviews"]})]}),(0,d.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(a=>{let c=s[a],e=b.length>0?c/b.length*100:0;return(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsxs)("span",{className:"text-sm text-gray-600 w-12",children:[a," stars"]}),(0,d.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${e}%`}})}),(0,d.jsx)("span",{className:"text-sm text-gray-600 w-12 text-right",children:c})]},a)})})]})}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)(f.dJT,{className:"w-5 h-5 text-gray-600"}),(0,d.jsxs)("select",{value:j||"",onChange:a=>k(a.target.value?parseInt(a.target.value):null),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("option",{value:"",children:"All Ratings"}),(0,d.jsx)("option",{value:"5",children:"5 Stars"}),(0,d.jsx)("option",{value:"4",children:"4 Stars"}),(0,d.jsx)("option",{value:"3",children:"3 Stars"}),(0,d.jsx)("option",{value:"2",children:"2 Stars"}),(0,d.jsx)("option",{value:"1",children:"1 Star"})]}),(0,d.jsxs)("select",{value:l,onChange:a=>m(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("option",{value:"recent",children:"Most Recent"}),(0,d.jsx)("option",{value:"helpful",children:"Most Helpful"}),(0,d.jsx)("option",{value:"rating_high",children:"Highest Rating"}),(0,d.jsx)("option",{value:"rating_low",children:"Lowest Rating"})]})]})}),(0,d.jsx)("div",{className:"space-y-4",children:0===b.length?(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,d.jsx)(f.vEG,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,d.jsx)("p",{className:"text-gray-600",children:"No reviews yet"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Be the first to review this module!"})]}):b.map(a=>(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,d.jsx)("span",{className:"font-semibold text-gray-900",children:a.user_name}),q(a.rating)]}),a.title&&(0,d.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:a.title})]}),(0,d.jsx)("span",{className:"text-sm text-gray-500",children:new Date(a.created_at).toLocaleDateString()})]}),(0,d.jsx)("p",{className:"text-gray-700 mb-4",children:a.comment}),(0,d.jsx)("div",{className:"flex items-center space-x-4 text-sm",children:(0,d.jsxs)("button",{onClick:()=>p(a.id),className:"flex items-center space-x-1 text-gray-600 hover:text-blue-600 transition-colors",children:[(0,d.jsx)(f.twC,{className:"w-4 h-4"}),(0,d.jsxs)("span",{children:["Helpful (",a.helpful_count,")"]})]})})]},a.id))}),g&&a&&(0,d.jsx)(h,{moduleId:a,onClose:()=>i(!1),onSubmit:o})]})},h=({moduleId:a,onClose:b,onSubmit:c})=>{let[g,h]=(0,e.useState)({module_id:a,rating:5,title:"",comment:""});return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Write a Review"}),(0,d.jsxs)("form",{onSubmit:a=>{a.preventDefault(),c(g)},className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rating"}),(0,d.jsx)("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(a=>(0,d.jsx)("button",{type:"button",onClick:()=>h({...g,rating:a}),className:"focus:outline-none",children:(0,d.jsx)(f.FEq,{className:`w-8 h-8 ${a<=g.rating?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},a))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title (Optional)"}),(0,d.jsx)("input",{type:"text",value:g.title,onChange:a=>h({...g,title:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Sum up your experience"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Review"}),(0,d.jsx)("textarea",{value:g.comment,onChange:a=>h({...g,comment:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:5,placeholder:"Share your thoughts about this module...",required:!0})]}),(0,d.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,d.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,d.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Submit Review"})]})]})]})})}}};