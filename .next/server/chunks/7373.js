"use strict";exports.id=7373,exports.ids=[7373],exports.modules={7373:(a,b,c)=>{c.r(b),c.d(b,{MarketplacePage:()=>g});var d=c(8732),e=c(82015),f=c(74952);let g=()=>{let[a,b]=(0,e.useState)([]),[c,g]=(0,e.useState)([]),[h,i]=(0,e.useState)(new Set),[j,k]=(0,e.useState)(!0),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)(""),[p,q]=(0,e.useState)("downloads");(0,e.useEffect)(()=>{r(),s(),t()},[n,p]);let r=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/marketplace/categories",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();c.success&&g(c.data)}catch(a){console.error("Failed to fetch categories:",a)}},s=async()=>{try{let a=localStorage.getItem("token"),c=new URLSearchParams;n&&c.append("category",n),p&&c.append("sort",p);let d=await fetch(`http://localhost:3001/api/marketplace/modules?${c}`,{headers:{Authorization:`Bearer ${a}`}}),e=await d.json();e.success&&b(e.data)}catch(a){console.error("Failed to fetch modules:",a)}finally{k(!1)}},t=async()=>{try{let a=localStorage.getItem("token"),b=await fetch("http://localhost:3001/api/marketplace/installed",{headers:{Authorization:`Bearer ${a}`}}),c=await b.json();if(c.success){let a=new Set(c.data.map(a=>a.module_id));i(a)}}catch(a){console.error("Failed to fetch installed modules:",a)}},u=async a=>{try{let b=localStorage.getItem("token"),c=await fetch("http://localhost:3001/api/marketplace/install",{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({module_id:a})}),d=await c.json();d.success?(i(b=>new Set([...b,a])),alert("Module installed successfully!")):alert(d.error||"Failed to install module")}catch(a){console.error("Install error:",a),alert("Failed to install module")}},v=async a=>{if(confirm("Are you sure you want to uninstall this module?"))try{let b=localStorage.getItem("token"),c=await fetch(`http://localhost:3001/api/marketplace/uninstall/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});(await c.json()).success&&(i(b=>{let c=new Set(b);return c.delete(a),c}),alert("Module uninstalled successfully!"))}catch(a){console.error("Uninstall error:",a),alert("Failed to uninstall module")}},w=a.filter(a=>a.name.toLowerCase().includes(l.toLowerCase())||a.description.toLowerCase().includes(l.toLowerCase()));return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Module Marketplace"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Extend your CortexBuild platform with powerful modules"})]}),(0,d.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{className:"relative md:col-span-2",children:[(0,d.jsx)(f.vji,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,d.jsx)("input",{type:"text",placeholder:"Search modules...",value:l,onChange:a=>m(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,d.jsx)("option",{value:"downloads",children:"Most Popular"}),(0,d.jsx)("option",{value:"rating",children:"Highest Rated"}),(0,d.jsx)("option",{value:"newest",children:"Newest"}),(0,d.jsx)("option",{value:"name",children:"Name (A-Z)"})]})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,d.jsx)("div",{className:"lg:col-span-1",children:(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,d.jsxs)("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,d.jsx)(f.dJT,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Categories"})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("button",{onClick:()=>o(""),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${""===n?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{children:"All Modules"}),(0,d.jsx)("span",{className:"text-sm text-gray-500",children:a.length})]})}),c.map(a=>(0,d.jsx)("button",{onClick:()=>o(a.slug),className:`w-full text-left px-3 py-2 rounded-lg transition-colors ${n===a.slug?"bg-blue-100 text-blue-700":"hover:bg-gray-100"}`,children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{children:a.name}),(0,d.jsx)("span",{className:"text-sm text-gray-500",children:a.module_count})]})},a.id))]})]})}),(0,d.jsx)("div",{className:"lg:col-span-3",children:j?(0,d.jsx)("div",{className:"text-center py-12",children:"Loading modules..."}):(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w.map(a=>{let b=h.has(a.id);return(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.name}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),(0,d.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[(0,d.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,d.jsx)(f.f5X,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:a.downloads.toLocaleString()})]}),(0,d.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,d.jsx)(f.FEq,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),(0,d.jsxs)("span",{children:[a.rating," (",a.reviews_count,")"]})]})]})]}),b&&(0,d.jsx)("div",{className:"ml-4 p-2 bg-green-100 rounded-full",children:(0,d.jsx)(f.Jlk,{className:"w-5 h-5 text-green-600"})})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:["v",a.version]}),a.is_free?(0,d.jsx)("span",{className:"ml-3 px-2 py-1 bg-green-100 text-green-800 text-xs font-semibold rounded",children:"FREE"}):(0,d.jsxs)("span",{className:"ml-3 text-lg font-bold text-gray-900",children:["\xa3",a.price]})]}),b?(0,d.jsxs)("button",{onClick:()=>v(a.id),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[(0,d.jsx)(f.X,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Uninstall"})]}):(0,d.jsxs)("button",{onClick:()=>u(a.id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,d.jsx)(f.lPX,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:"Install"})]})]})]},a.id)})})})]})]})})}}};